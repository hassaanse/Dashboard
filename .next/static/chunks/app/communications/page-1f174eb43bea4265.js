(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[374],{67295:(e,s,t)=>{Promise.resolve().then(t.bind(t,27209)),Promise.resolve().then(t.bind(t,2805))},27209:(e,s,t)=>{"use strict";t.d(s,{default:()=>A});var n=t(95155),a=t(12115),i=t(89100),r=t(46106),l=t(47335),o=t(2432),c=t(48983),d=t(12406),h=t(27315),x=t(30910),m=t(18786);t(31493),t(27116),t(85869),t(91068);var u=t(22282);t(2805);var g=t(76581);let p=e=>{let{HandleIsAddClose:s}=e,[t,i]=(0,a.useState)(""),[r,l]=(0,a.useState)(""),[o,c]=(0,a.useState)(""),[d,h]=(0,a.useState)(null),x=async e=>{e.preventDefault();let n=new FormData;n.append("topic",t),n.append("title",r),n.append("body",o),d&&n.append("image",d);try{let e=await fetch("https://thekoi.ca/backened/campaign/CreateNotification",{method:"POST",body:n});if(s(),!e.ok)throw Error("Network response was not ok");let t=await e.json();console.log("Success:",t),i(""),l(""),c(""),h(null)}catch(e){console.error("Error:",e)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"flex justify-left",onClick:s,children:[(0,n.jsx)(g.A,{className:"mr-2 cursor-pointer"}),(0,n.jsx)("h2",{className:"font-bold mb-4 cursor-pointer",children:"Back"})]}),(0,n.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:(0,n.jsxs)("div",{className:"bg-white p-10 rounded-lg shadow-lg w-full max-w-3xl",children:[(0,n.jsx)("h1",{className:"text-3xl font-semibold mb-6 text-center text-gray-800",children:"Create a New Notification"}),(0,n.jsxs)("form",{onSubmit:x,children:[(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{className:"block text-lg font-medium text-gray-700",children:"Topic"}),(0,n.jsx)("input",{type:"text",value:t,onChange:e=>i(e.target.value),placeholder:"Enter topic here...",className:"w-full mt-2 p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{className:"block text-lg font-medium text-gray-700",children:"Title"}),(0,n.jsx)("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Enter title here...",className:"w-full mt-2 p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,n.jsxs)("div",{className:"mb-6",children:[(0,n.jsx)("label",{className:"block text-lg font-medium text-gray-700",children:"Body"}),(0,n.jsx)("textarea",{value:o,onChange:e=>c(e.target.value),placeholder:"Enter body content here...",rows:"4",className:"w-full mt-2 p-3 border border-gray-300 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-4",children:[(0,n.jsx)("button",{type:"button",className:"bg-gray-500 text-white px-6 py-3 rounded-lg shadow-sm hover:bg-gray-600",children:"Cancel"}),(0,n.jsx)("button",{type:"submit",className:"bg-green-500 text-white px-6 py-3 rounded-lg shadow-sm hover:bg-green-600",children:"Create"})]})]})]})})]})};var j=t(77740),b=t(7831);function A(){let[e,s]=(0,a.useState)(0),[t,g]=(0,a.useState)(10),[A,f]=(0,a.useState)([]),[y,w]=(0,a.useState)([]),[v,N]=(0,a.useState)(!0),[k,C]=(0,a.useState)(!1),[S,P]=(0,a.useState)(null),[W,E]=(0,a.useState)(""),[L,D]=(0,a.useState)(""),[F,M]=(0,a.useState)(!1);(0,a.useEffect)(()=>{I()},[k]),(0,a.useEffect)(()=>{T(W)},[W]);let T=e=>{e?f(A.filter(s=>s.campaignName.toLowerCase().includes(e.toLowerCase())||s.description.toLowerCase().includes(e.toLowerCase())||s.campaignId.toString().toLowerCase().includes(e.toLowerCase()))):f(y)},I=()=>{fetch("https://thekoi.ca/backened/campaign/notifications").then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>(console.log("Data is",e),f(e),w(e),N(!1),e)).catch(e=>{console.log(e)})},_=e=>{console.log("Edit Record is : ",e),P(null),C(!0)},H=e=>{let s=new Date(e);return(0,i.GP)(s,"MMMM d, yyyy h:mm a")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(b.n,{maxSnack:3}),k?(0,n.jsx)(p,{HandleIsAddClose:()=>{C(!1)}}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"font-bold mb-4",children:"Notifications"}),(0,n.jsxs)("div",{className:"flex justify-between ",children:[(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"text",placeholder:"Search Notifications",value:W,onChange:e=>{E(e.target.value)},className:"mb-2 px-2 py-2 rounded-lg border-2"})}),(0,n.jsx)(u.A,{variant:"outlined",className:"mb-2",onClick:()=>_(),startIcon:(0,n.jsx)(j.A,{}),children:"Add New Notification"})]}),(0,n.jsxs)(r.A,{sx:{width:"100%",overflow:"hidden"},children:[(0,n.jsx)(d.A,{sx:{maxHeight:440},children:(0,n.jsxs)(l.A,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,n.jsx)(h.A,{children:(0,n.jsxs)(m.A,{children:[(0,n.jsx)(c.A,{align:"center",style:{minWidth:70},children:"ID"}),(0,n.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Title"}),(0,n.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Message"}),(0,n.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Type"}),(0,n.jsx)(c.A,{align:"center",style:{minWidth:170},children:"UserId"}),(0,n.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Creation Date"}),(0,n.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Update Campaign"})]})}),(0,n.jsx)(o.A,{children:A.notifications&&A.notifications.length>0?A.notifications.slice(e*t,e*t+t).map((e,s)=>(0,n.jsxs)(m.A,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,n.jsx)(c.A,{align:"center",children:e.id}),(0,n.jsx)(c.A,{align:"center",children:e.title}),(0,n.jsx)(c.A,{align:"center",children:e.body}),(0,n.jsx)(c.A,{align:"center",children:e.type}),(0,n.jsx)(c.A,{align:"center",children:e.userId}),(0,n.jsx)(c.A,{align:"center",children:H(e.createdAt)}),(0,n.jsx)(c.A,{align:"center",children:H(e.updatedAt)})]},s)):(0,n.jsx)(m.A,{children:(0,n.jsx)(c.A,{colSpan:8,align:"center",children:"No Notifications Available"})})})]})}),(0,n.jsx)(x.A,{rowsPerPageOptions:[10,25,100],component:"div",count:A.length,rowsPerPage:t,page:e,onPageChange:(e,t)=>{s(t)},onRowsPerPageChange:e=>{g(+e.target.value),s(0)}})]})]})]})}},2805:(e,s,t)=>{"use strict";t.d(s,{default:()=>H});var n=t(95155),a=t(12115),i=t(81996),r=t.n(i),l=t(11451),o=t(63592),c=t(20457),d=t(2241),h=t(19579),x=t(894),m=t(4918),u=t(41983),g=t(36017),p=t(2091),j=t(60391),b=t(8266),A=t(46805),f=t(10810),y=t(35256),w=t(46552),v=t(94856),N=t(5565);let k={src:"/_next/static/media/Dashboadlogo.8c9740a7.gif",height:150,width:150,blurWidth:0,blurHeight:0};var C=t(2215),S=t(46876),P=t(65509),W=t(62982),E=t(82354),L=t(83746),D=t(78481),F=t(64108),M=t(76046),T=t(56119),I=t(2615);function _(e){let s=(0,M.useRouter)(),t=(0,M.usePathname)();console.log("Pathname is ",t);let{window:i,children:r}=e,[_,H]=(0,a.useState)(!1),[O,U]=(0,a.useState)(!1),[R,z]=(0,a.useState)(!1),{data:B}=(0,I.useSession)({required:!0,onUnauthenticated(){(0,M.redirect)("/")}});B&&console.log("Session User ",B.user);let G=()=>{(0,I.signOut)()},q=(0,n.jsxs)("div",{children:[(0,n.jsxs)(A.A,{className:"p-[-20px] m-[-8px]",children:[(0,n.jsx)(N.default,{className:"ml-[-20px]",src:k,height:80,width:80,alt:"Logo"}),(0,n.jsx)(f.A,{variant:"h4",noWrap:!0,component:"div",children:"TheKoi"})]}),(0,n.jsx)(d.A,{}),(0,n.jsxs)(m.A,{children:[["Dashboard","Compaigns","Users","Communications"].map((e,a)=>(0,n.jsx)(u.Ay,{disablePadding:!0,className:t.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",onClick:()=>{s.push("/"+e.toLowerCase())},children:(0,n.jsxs)(g.A,{children:[(0,n.jsxs)(p.A,{className:t.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",children:[0===a&&(0,n.jsx)(C.A,{}),1===a&&(0,n.jsx)(S.A,{}),2===a&&(0,n.jsx)(P.A,{}),3===a&&(0,n.jsx)(W.A,{})]}),(0,n.jsx)(j.A,{primary:e})]})},e)),(0,n.jsx)(u.Ay,{disablePadding:!0,onClick:()=>{U(!O)},className:t.startsWith("/help")?"text-sky-600 bg-slate-100":"text-slate-700",children:(0,n.jsxs)(g.A,{children:[(0,n.jsx)(p.A,{className:t.startsWith("/help")?"text-sky-600 bg-slate-100":"text-slate-700",onClick:()=>{s.push("/help")},children:(0,n.jsx)(E.A,{})}),(0,n.jsx)(j.A,{primary:"Help"}),O?(0,n.jsx)(v.A,{}):(0,n.jsx)(w.A,{})]})})]}),(0,n.jsx)(d.A,{}),(0,n.jsx)(y.A,{in:O,timeout:"auto",unmountOnExit:!0,children:(0,n.jsx)(m.A,{className:"ml-4",children:["Support","Contact","Help"].map((e,a)=>(0,n.jsx)(u.Ay,{disablePadding:!0,className:t.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",onClick:()=>{s.push("/"+e.toLowerCase())},children:(0,n.jsxs)(g.A,{children:[(0,n.jsxs)(p.A,{className:t.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",children:[0===a&&(0,n.jsx)(L.A,{}),1===a&&(0,n.jsx)(D.A,{}),2===a&&(0,n.jsx)(F.A,{})]}),(0,n.jsx)(j.A,{primary:e})]})},e))})})]});return(0,n.jsxs)(o.A,{sx:{display:"flex"},children:[(0,n.jsx)(c.Ay,{}),(0,n.jsx)(l.A,{position:"fixed",sx:{width:{sm:"calc(100% - ".concat(240,"px)")},ml:{sm:"".concat(240,"px")},bgcolor:"#FFFFFF",color:"#2f2f2f"},children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)(A.A,{children:[(0,n.jsx)(x.A,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:()=>{R||H(!_)},sx:{mr:2,display:{sm:"none"}},children:(0,n.jsx)(b.A,{})}),(0,n.jsx)(f.A,{variant:"h6",noWrap:!0,component:"div",children:"Dashboard"})]}),(0,n.jsx)("div",{className:"mt-3 mr-3 cursor-pointer",onClick:()=>G(),children:(0,n.jsxs)(f.A,{variant:"h6",noWrap:!0,component:"div",children:[(0,n.jsx)(T.A,{})," Logout"]})})]})}),(0,n.jsxs)(o.A,{component:"nav",sx:{width:{sm:240},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[(0,n.jsx)(h.Ay,{container:void 0!==i?()=>i().document.body:void 0,variant:"temporary",open:_,onTransitionEnd:()=>{z(!1)},onClose:()=>{z(!0),H(!1)},ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},children:q}),(0,n.jsx)(h.Ay,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},open:!0,children:q})]}),(0,n.jsxs)(o.A,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(240,"px)")}},children:[(0,n.jsx)(A.A,{}),(0,n.jsx)("main",{children:r})," "]})]})}_.propTypes={window:r().func,children:r().node};let H=_}},e=>{var s=s=>e(e.s=s);e.O(0,[740,615,399,675,898,831,855,806,441,517,358],()=>s(67295)),_N_E=e.O()}]);