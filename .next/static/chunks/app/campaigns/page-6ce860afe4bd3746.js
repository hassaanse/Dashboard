(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[134],{4271:(e,t,s)=>{Promise.resolve().then(s.bind(s,32489))},32489:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>I});var a=s(95155),i=s(12115),n=s(2805),r=s(89100),o=s(47335),l=s(2432),c=s(48983),d=s(12406),h=s(27315),x=s(30910),p=s(18786),g=s(22926);s(31493);var m=s(27116);s(85869),s(91068);var j=s(22282),u=s(77740),f=s(19128),A=s(7831),y=s(82802),b=s.n(y),v=s(43619),C=s(76581),k=s(76046);let w=e=>{let{videos:t}=e,s=e=>{let{videoId:t,title:s,path:i,views:n}=e;return(0,a.jsxs)("div",{className:"video-card",style:N.card,children:[(0,a.jsx)("h3",{children:s}),(0,a.jsxs)("video",{controls:!0,width:"400",style:N.video,children:[(0,a.jsx)("source",{src:i,type:"video/mp4"}),"Your browser does not support the video tag."]}),(0,a.jsxs)("p",{children:[n," views"]})]},t)};return(0,a.jsx)("div",{className:"video-gallery",style:N.gallery,children:t.map(e=>(0,a.jsx)(s,{videoId:e.videoId,title:e.title,path:"https://thekoi.ca/backened/"+e.path,views:e.views},e.videoId))})},N={gallery:{display:"flex",flexWrap:"wrap",gap:"20px",justifyContent:"center"},card:{border:"1px solid #ccc",borderRadius:"8px",padding:"16px",textAlign:"center",width:"400px"},video:{width:"100%",height:"auto"}},S=e=>{let{campaignId:t,onBack:s}=e,[n,r]=(0,i.useState)([]),[o,l]=(0,i.useState)(!0);return((0,k.useRouter)(),(0,i.useEffect)(()=>{(async()=>{try{let e=await fetch("https://thekoi.ca/backened/campaign/videowithID",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaignId:t})}),s=await e.json();console.log("data of videoID is : "),r(s),l(!1)}catch(e){console.error("Error fetching videos:",e),l(!1)}})()},[]),o)?(0,a.jsx)("p",{children:"Loading videos..."}):(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-left",onClick:s,children:[(0,a.jsx)(C.A,{className:"mr-2 cursor-pointer"}),(0,a.jsx)("h2",{className:"font-bold mb-4 cursor-pointer",children:"Back"})]}),(0,a.jsx)(w,{videos:n})]})};function W(e){let{onBack:t}=e,[s,n]=(0,i.useState)(),[y,C]=(0,i.useState)({}),[k,w]=(0,i.useState)({}),N=e=>{w(t=>({...t,[e]:!t[e]})),k[e]?Q(e):Z(e)},[W,I]=(0,i.useState)(0),[P,D]=(0,i.useState)(10),[O,T]=(0,i.useState)([]),[L,M]=(0,i.useState)([]),[E,F]=(0,i.useState)(!0),[_,z]=(0,i.useState)(!1),[H,R]=(0,i.useState)(null),[J,U]=(0,i.useState)(""),[B,G]=(0,i.useState)(""),[V,Y]=(0,i.useState)(!1);(0,i.useEffect)(()=>{X()},[_]),(0,i.useEffect)(()=>{K(J)},[J]);let q=()=>{Y(!1)},K=e=>{e?T(O.filter(t=>t.campaignName.toLowerCase().includes(e.toLowerCase())||t.description.toLowerCase().includes(e.toLowerCase())||t.campaignId.toString().toLowerCase().includes(e.toLowerCase()))):T(L)},X=()=>{fetch("https://thekoi.ca/backened/campaign/getAllCompaigns").then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>(console.log("Data is",e),T(e),M(e),F(!1),e)).catch(e=>{console.log(e)})},Z=e=>{fetch("https://thekoi.ca/backened/campaign/activated",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaignId:e})}).then(e=>{console.log("data",e),X()}).then(e=>{(0,A.M8)("Activated Campaign",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},style:{backgroundColor:"#00ff00",color:"#ffffff",fontWeight:"bold"}})})},Q=e=>{n(e),fetch("https://thekoi.ca/backened/campaign/deactivated",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaignId:e})}).then(e=>{console.log("data",e),X()}).then(e=>{(0,A.M8)("Deactivated Campaign",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},style:{backgroundColor:"#00ff00",color:"#ffffff",fontWeight:"bold"}})})},$=e=>{fetch("https://thekoi.ca/backened/campaign/CreateNotification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:"Watch Campaign "+{row:e},body:"Complete watching this campaign to rank up!"})}).then(e=>{console.log("data",e),X()}).then(e=>{(0,A.M8)("Successfuly send notification",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},style:{backgroundColor:"#00ff00",color:"#ffffff",fontWeight:"bold"}})})},ee=e=>{console.log("Edit Record is : ",e),R(null),z(!0)},[et,es]=(0,i.useState)(!1),[ea,ei]=(0,i.useState)(null),en=e=>{ei(e),es(!0)},er=e=>{console.log("Delete Record is : ",e),(0,m.ZX)({title:"Confirm to submit",message:"Are you sure to do this.",buttons:[{label:"Yes",onClick:()=>eo(e)},{label:"No"}]})},eo=e=>{fetch("https://thekoi.ca/backened/campaign/deleteCompaign",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaignId:e.campaignId})}).then(e=>{console.log("data",e),X()}).then(e=>{(0,A.M8)("Campaign is Deleted!",{variant:"success",anchorOrigin:{vertical:"top",horizontal:"right"},style:{backgroundColor:"#00ff00",color:"#ffffff",fontWeight:"bold"}})})},el=e=>{let t=new Date(e);return(0,r.GP)(t,"MMMM d, yyyy h:mm a")};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(A.n,{maxSnack:3,children:et?(0,a.jsx)(S,{campaignId:ea,handleBackToTable:()=>{es(!1)}}):(0,a.jsx)(a.Fragment,{children:_?(0,a.jsx)(User,{Details:!0,HandleIsAddClose:()=>{z(!1)}}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h2",{className:"font-bold mb-4",children:"Campaigns"}),(0,a.jsxs)("div",{className:"flex justify-between ",children:[(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",placeholder:"Search Campaigns",value:J,onChange:e=>{U(e.target.value)},className:"mb-2 px-2 py-2 rounded-lg border-2"})}),(0,a.jsx)(j.A,{variant:"outlined",className:"mb-2",onClick:()=>ee(),startIcon:(0,a.jsx)(u.A,{}),children:"Add Campaign"})]}),(0,a.jsx)(d.A,{sx:{maxHeight:440},children:(0,a.jsxs)(o.A,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,a.jsx)(h.A,{children:(0,a.jsxs)(p.A,{children:[(0,a.jsx)(c.A,{align:"center",style:{minWidth:70},children:"ID"}),(0,a.jsx)(c.A,{align:"center",style:{minWidth:170},children:"NAME"}),(0,a.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Description"}),(0,a.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Campaign"}),(0,a.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Views"}),(0,a.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Creation Date"}),(0,a.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Activate Campaign"}),(0,a.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Push Notification"}),(0,a.jsx)(c.A,{align:"center",style:{minWidth:170},children:"Delete Campaign"})]})}),(0,a.jsx)(l.A,{children:O.slice(W*P,W*P+P).map((e,t)=>(0,a.jsxs)(p.A,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,a.jsx)(c.A,{align:"center",children:e.campaignId},t),(0,a.jsx)(c.A,{align:"center",children:e.campaignName},t),(0,a.jsx)(c.A,{align:"center",children:e.description},t),(0,a.jsx)(c.A,{align:"center",children:(0,a.jsx)(j.A,{onClick:()=>en(e.campaignId),variant:"contained",children:"Play Video"})},t),(0,a.jsx)(v.A,{open:V,onClose:q,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,a.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"-1rem",alignItems:"center",justifyContent:"center",height:"100%"},children:[(0,a.jsx)(b(),{url:B,controls:!0}),(0,a.jsx)(j.A,{onClick:q,style:{marginTop:"1rem"},className:"bg-red-600 text-white",children:"Close"})]})}),(0,a.jsx)(c.A,{align:"center",children:e.views},t),(0,a.jsx)(c.A,{align:"center",children:el(e.createdAt)},t),(0,a.jsx)(c.A,{align:"center",children:(0,a.jsx)("div",{className:"flex justify-center gap-2",children:(0,a.jsx)(j.A,{onClick:()=>N(e.campaignId),variant:"contained",color:k[e.campaignId]?"inherit":"success",children:k[e.campaignId]?"Deactivate":"Activate"})},e.campaignId)},t),(0,a.jsx)(c.A,{align:"center",children:(0,a.jsx)("div",{className:"flex justify-center gap-2",children:(0,a.jsx)("div",{className:"cursor-pointer text-green-500 ",onClick:()=>{$(e.campaignName)},children:(0,a.jsx)(f.A,{})})})},t),(0,a.jsx)(c.A,{align:"center",children:(0,a.jsx)(j.A,{onClick:()=>er(e),variant:"contained",color:"error",startIcon:(0,a.jsx)(g.A,{}),children:"Delete"})},t)]},e.code))})]})}),(0,a.jsx)(x.A,{rowsPerPageOptions:[10,25,100],component:"div",count:O.length,rowsPerPage:P,page:W,onPageChange:(e,t)=>{I(t)},onRowsPerPageChange:e=>{D(+e.target.value),I(0)}})]})})})})}function I(){return(0,a.jsx)(n.default,{children:(0,a.jsx)(W,{})})}},2805:(e,t,s)=>{"use strict";s.d(t,{default:()=>_});var a=s(95155),i=s(12115),n=s(81996),r=s.n(n),o=s(11451),l=s(63592),c=s(20457),d=s(2241),h=s(19579),x=s(894),p=s(4918),g=s(41983),m=s(36017),j=s(2091),u=s(60391),f=s(8266),A=s(46805),y=s(10810),b=s(35256),v=s(46552),C=s(94856),k=s(5565);let w={src:"/_next/static/media/Dashboadlogo.8c9740a7.gif",height:150,width:150,blurWidth:0,blurHeight:0};var N=s(2215),S=s(46876),W=s(65509),I=s(62982),P=s(82354),D=s(83746),O=s(78481),T=s(64108),L=s(76046),M=s(56119),E=s(2615);function F(e){let t=(0,L.useRouter)(),s=(0,L.usePathname)();console.log("Pathname is ",s);let{window:n,children:r}=e,[F,_]=(0,i.useState)(!1),[z,H]=(0,i.useState)(!1),[R,J]=(0,i.useState)(!1),{data:U}=(0,E.useSession)({required:!0,onUnauthenticated(){(0,L.redirect)("/")}});U&&console.log("Session User ",U.user);let B=()=>{(0,E.signOut)()},G=(0,a.jsxs)("div",{children:[(0,a.jsxs)(A.A,{className:"p-[-20px] m-[-8px]",children:[(0,a.jsx)(k.default,{className:"ml-[-20px]",src:w,height:80,width:80,alt:"Logo"}),(0,a.jsx)(y.A,{variant:"h4",noWrap:!0,component:"div",children:"TheKoi"})]}),(0,a.jsx)(d.A,{}),(0,a.jsxs)(p.A,{children:[["Dashboard","Campaigns","Users","Communications"].map((e,i)=>(0,a.jsx)(g.Ay,{disablePadding:!0,className:s.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",onClick:()=>{t.push("/"+e.toLowerCase())},children:(0,a.jsxs)(m.A,{children:[(0,a.jsxs)(j.A,{className:s.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",children:[0===i&&(0,a.jsx)(N.A,{}),1===i&&(0,a.jsx)(S.A,{}),2===i&&(0,a.jsx)(W.A,{}),3===i&&(0,a.jsx)(I.A,{})]}),(0,a.jsx)(u.A,{primary:e})]})},e)),(0,a.jsx)(g.Ay,{disablePadding:!0,onClick:()=>{H(!z)},className:s.startsWith("/help")?"text-sky-600 bg-slate-100":"text-slate-700",children:(0,a.jsxs)(m.A,{children:[(0,a.jsx)(j.A,{className:s.startsWith("/help")?"text-sky-600 bg-slate-100":"text-slate-700",onClick:()=>{t.push("/help")},children:(0,a.jsx)(P.A,{})}),(0,a.jsx)(u.A,{primary:"Help"}),z?(0,a.jsx)(C.A,{}):(0,a.jsx)(v.A,{})]})})]}),(0,a.jsx)(d.A,{}),(0,a.jsx)(b.A,{in:z,timeout:"auto",unmountOnExit:!0,children:(0,a.jsx)(p.A,{className:"ml-4",children:["Support","Contact","Help"].map((e,i)=>(0,a.jsx)(g.Ay,{disablePadding:!0,className:s.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",onClick:()=>{t.push("/"+e.toLowerCase())},children:(0,a.jsxs)(m.A,{children:[(0,a.jsxs)(j.A,{className:s.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",children:[0===i&&(0,a.jsx)(D.A,{}),1===i&&(0,a.jsx)(O.A,{}),2===i&&(0,a.jsx)(T.A,{})]}),(0,a.jsx)(u.A,{primary:e})]})},e))})})]});return(0,a.jsxs)(l.A,{sx:{display:"flex"},children:[(0,a.jsx)(c.Ay,{}),(0,a.jsx)(o.A,{position:"fixed",sx:{width:{sm:"calc(100% - ".concat(240,"px)")},ml:{sm:"".concat(240,"px")},bgcolor:"#FFFFFF",color:"#2f2f2f"},children:(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsxs)(A.A,{children:[(0,a.jsx)(x.A,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:()=>{R||_(!F)},sx:{mr:2,display:{sm:"none"}},children:(0,a.jsx)(f.A,{})}),(0,a.jsx)(y.A,{variant:"h6",noWrap:!0,component:"div",children:"Dashboard"})]}),(0,a.jsx)("div",{className:"mt-3 mr-3 cursor-pointer",onClick:()=>B(),children:(0,a.jsxs)(y.A,{variant:"h6",noWrap:!0,component:"div",children:[(0,a.jsx)(M.A,{})," Logout"]})})]})}),(0,a.jsxs)(l.A,{component:"nav",sx:{width:{sm:240},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[(0,a.jsx)(h.Ay,{container:void 0!==n?()=>n().document.body:void 0,variant:"temporary",open:F,onTransitionEnd:()=>{J(!1)},onClose:()=>{J(!0),_(!1)},ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},children:G}),(0,a.jsx)(h.Ay,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},open:!0,children:G})]}),(0,a.jsxs)(l.A,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(240,"px)")}},children:[(0,a.jsx)(A.A,{}),(0,a.jsx)("main",{children:r})," "]})]})}F.propTypes={window:r().func,children:r().node};let _=F}},e=>{var t=t=>e(e.s=t);e.O(0,[5740,2615,4399,9675,7831,5714,7898,6937,5948,8441,1517,7358],()=>t(4271)),_N_E=e.O()}]);