(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5009],{60602:(e,s,t)=>{Promise.resolve().then(t.bind(t,99182))},22926:(e,s,t)=>{"use strict";var n=t(9493);s.A=void 0;var r=n(t(84758)),a=t(95155);s.A=(0,r.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete")},2805:(e,s,t)=>{"use strict";t.d(s,{default:()=>_});var n=t(95155),r=t(12115),a=t(81996),i=t.n(a),l=t(11451),o=t(63592),c=t(20457),d=t(2241),h=t(19579),x=t(894),j=t(4918),u=t(41983),m=t(36017),p=t(2091),A=t(60391),g=t(8266),b=t(46805),y=t(10810),w=t(35256),f=t(46552),C=t(94856),v=t(5565);let k={src:"/_next/static/media/Dashboadlogo.8c9740a7.gif",height:150,width:150,blurWidth:0,blurHeight:0};var N=t(2215),S=t(46876),P=t(65509),W=t(62982),L=t(82354),D=t(83746),E=t(78481),M=t(64108),O=t(76046),H=t(56119),F=t(2615);function U(e){let s=(0,O.useRouter)(),t=(0,O.usePathname)();console.log("Pathname is ",t);let{window:a,children:i}=e,[U,_]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1),[z,R]=(0,r.useState)(!1),{data:G}=(0,F.useSession)({required:!0,onUnauthenticated(){(0,O.redirect)("/")}});G&&console.log("Session User ",G.user);let V=async()=>{await (0,F.signOut)({redirect:!1}),s.push("https://thekoi.ca/")},q=(0,n.jsxs)("div",{children:[(0,n.jsxs)(b.A,{className:"p-[-20px] m-[-8px]",children:[(0,n.jsx)(v.default,{className:"ml-[-20px]",src:k,height:80,width:80,alt:"Logo"}),(0,n.jsx)(y.A,{variant:"h4",noWrap:!0,component:"div",children:"TheKoi"})]}),(0,n.jsx)(d.A,{}),(0,n.jsxs)(j.A,{children:[["Dashboard","Campaigns","Users","Communications"].map((e,r)=>(0,n.jsx)(u.Ay,{disablePadding:!0,className:t.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",onClick:()=>{s.push("/"+e.toLowerCase())},children:(0,n.jsxs)(m.A,{children:[(0,n.jsxs)(p.A,{className:t.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",children:[0===r&&(0,n.jsx)(N.A,{}),1===r&&(0,n.jsx)(S.A,{}),2===r&&(0,n.jsx)(P.A,{}),3===r&&(0,n.jsx)(W.A,{})]}),(0,n.jsx)(A.A,{primary:e})]})},e)),(0,n.jsx)(u.Ay,{disablePadding:!0,onClick:()=>{I(!T)},className:t.startsWith("/help")?"text-sky-600 bg-slate-100":"text-slate-700",children:(0,n.jsxs)(m.A,{children:[(0,n.jsx)(p.A,{className:t.startsWith("/help")?"text-sky-600 bg-slate-100":"text-slate-700",onClick:()=>{s.push("/help")},children:(0,n.jsx)(L.A,{})}),(0,n.jsx)(A.A,{primary:"Help"}),T?(0,n.jsx)(C.A,{}):(0,n.jsx)(f.A,{})]})})]}),(0,n.jsx)(d.A,{}),(0,n.jsx)(w.A,{in:T,timeout:"auto",unmountOnExit:!0,children:(0,n.jsx)(j.A,{className:"ml-4",children:["Support","Contact","Help"].map((e,r)=>(0,n.jsx)(u.Ay,{disablePadding:!0,className:t.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",onClick:()=>{s.push("/"+e.toLowerCase())},children:(0,n.jsxs)(m.A,{children:[(0,n.jsxs)(p.A,{className:t.startsWith("/"+e.toLowerCase())?"text-sky-600 bg-slate-100":"text-slate-700",children:[0===r&&(0,n.jsx)(D.A,{}),1===r&&(0,n.jsx)(E.A,{}),2===r&&(0,n.jsx)(M.A,{})]}),(0,n.jsx)(A.A,{primary:e})]})},e))})})]});return(0,n.jsxs)(o.A,{sx:{display:"flex"},children:[(0,n.jsx)(c.Ay,{}),(0,n.jsx)(l.A,{position:"fixed",sx:{width:{sm:"calc(100% - ".concat(240,"px)")},ml:{sm:"".concat(240,"px")},bgcolor:"#FFFFFF",color:"#2f2f2f"},children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsxs)(b.A,{children:[(0,n.jsx)(x.A,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:()=>{z||_(!U)},sx:{mr:2,display:{sm:"none"}},children:(0,n.jsx)(g.A,{})}),(0,n.jsx)(y.A,{variant:"h6",noWrap:!0,component:"div",children:"Dashboard"})]}),(0,n.jsx)("div",{className:"mt-3 mr-3 cursor-pointer",onClick:()=>V(),children:(0,n.jsxs)(y.A,{variant:"h6",noWrap:!0,component:"div",children:[(0,n.jsx)(H.A,{})," Logout"]})})]})}),(0,n.jsxs)(o.A,{component:"nav",sx:{width:{sm:240},flexShrink:{sm:0}},"aria-label":"mailbox folders",children:[(0,n.jsx)(h.Ay,{container:void 0!==a?()=>a().document.body:void 0,variant:"temporary",open:U,onTransitionEnd:()=>{R(!1)},onClose:()=>{R(!0),_(!1)},ModalProps:{keepMounted:!0},sx:{display:{xs:"block",sm:"none"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},children:q}),(0,n.jsx)(h.Ay,{variant:"permanent",sx:{display:{xs:"none",sm:"block"},"& .MuiDrawer-paper":{boxSizing:"border-box",width:240}},open:!0,children:q})]}),(0,n.jsxs)(o.A,{component:"main",sx:{flexGrow:1,p:3,width:{sm:"calc(100% - ".concat(240,"px)")}},children:[(0,n.jsx)(b.A,{}),(0,n.jsx)("main",{children:i})," "]})]})}U.propTypes={window:i().func,children:i().node};let _=U},99182:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var n=t(95155),r=t(12115),a=t(2805),i=t(89100),l=t(46106),o=t(47335),c=t(2432),d=t(48983),h=t(12406),x=t(27315),j=t(30910),u=t(18786),m=t(22926),p=t(27116);t(85869);var A=t(91068);function g(){let[e,s]=(0,r.useState)(0),[t,a]=(0,r.useState)(10),[g,b]=(0,r.useState)([]),[y,w]=(0,r.useState)([]),[f,C]=(0,r.useState)(!0),[v,k]=(0,r.useState)(!1),[N,S]=(0,r.useState)(null),[P,W]=(0,r.useState)("");(0,r.useEffect)(()=>{D()},[v]),(0,r.useEffect)(()=>{L(P)},[P]);let L=e=>{e?b(y.filter(s=>s.userName.toLowerCase().includes(e.toLowerCase())||s.userEmail.toLowerCase().includes(e.toLowerCase())||s.location.toLowerCase().includes(e.toLowerCase()))):b(y)},D=()=>{fetch("https://thekoi.ca/backened/user/list").then(e=>{if(!e.ok)throw Error("Network response was not ok");return e.json()}).then(e=>{console.log("Data fetched:",e),b(e.users||[]),w(e.users||[]),C(!1)}).catch(e=>{console.error("Error fetching data:",e.message)})},E=e=>{(0,p.ZX)({title:"Confirm deletion",message:"Are you sure you want to delete this user?",buttons:[{label:"Yes",onClick:()=>M(e)},{label:"No"}]})},M=e=>{fetch("https://thekoi.ca/backened/user/delete",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e.id})}).then(e=>{console.log("Delete response:",e),D()}).then(()=>{A.oR.error("User successfully deleted",{position:"top-right",autoClose:5e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored",transition:A.br})})},O=e=>{let s=new Date(e);return(0,i.GP)(s,"MMMM d, yyyy h:mm a")};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A.N9,{}),v?(0,n.jsx)(UserDetails,{HandleIsAddClose:()=>{k(!1)},rows:N}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"font-bold mb-4",children:"Users"}),(0,n.jsx)("div",{className:"flex justify-between ",children:(0,n.jsx)("div",{children:(0,n.jsx)("input",{type:"text",placeholder:"Search Users",value:P,onChange:e=>{W(e.target.value)},className:"mb-2 px-2 py-2 rounded-lg border-2"})})}),(0,n.jsxs)(l.A,{sx:{width:"100%",overflow:"hidden"},children:[(0,n.jsx)(h.A,{sx:{maxHeight:440},children:(0,n.jsxs)(o.A,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,n.jsx)(x.A,{children:(0,n.jsxs)(u.A,{children:[(0,n.jsx)(d.A,{align:"center",style:{minWidth:70},children:"ID"}),(0,n.jsx)(d.A,{align:"center",style:{minWidth:170},children:"NAME"}),(0,n.jsx)(d.A,{align:"center",style:{minWidth:170},children:"EMAIL"}),(0,n.jsx)(d.A,{align:"center",style:{minWidth:170},children:"Phone Number"}),(0,n.jsx)(d.A,{align:"center",style:{minWidth:170},children:"LOCATION"}),(0,n.jsx)(d.A,{align:"center",style:{minWidth:170},children:"Views"}),(0,n.jsx)(d.A,{align:"center",style:{minWidth:170},children:"Creation Date"}),(0,n.jsx)(d.A,{align:"center",style:{minWidth:170},children:"Action Center"})]})}),(0,n.jsx)(c.A,{children:g.slice(e*t,e*t+t).map((e,s)=>(0,n.jsxs)(u.A,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,n.jsx)(d.A,{align:"center",children:e.id},s),(0,n.jsx)(d.A,{align:"center",children:e.firstName+" "+e.lastName},s),(0,n.jsx)(d.A,{align:"center",children:e.email},s),(0,n.jsx)(d.A,{align:"center",children:e.number},s),(0,n.jsx)(d.A,{align:"center",children:e.city+", "+e.country},s),(0,n.jsx)(d.A,{align:"center",children:e.views},s),(0,n.jsx)(d.A,{align:"center",children:O(e.createdAt)},s),(0,n.jsx)(d.A,{align:"center",children:(0,n.jsx)("div",{className:"flex justify-center gap-2",children:(0,n.jsx)("div",{className:"cursor-pointer text-red-500",onClick:()=>{E(e)},children:(0,n.jsx)(m.A,{})})})},s)]},e.code))})]})}),(0,n.jsx)(j.A,{rowsPerPageOptions:[10,25,100],component:"div",count:g.length,rowsPerPage:t,page:e,onPageChange:(e,t)=>{s(t)},onRowsPerPageChange:e=>{a(+e.target.value),s(0)}})]})]})]})}function b(){return(0,n.jsx)(a.default,{children:(0,n.jsx)(g,{})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[5740,2615,4399,9675,7898,8441,1517,7358],()=>s(60602)),_N_E=e.O()}]);